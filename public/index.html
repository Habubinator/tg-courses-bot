<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Bot Admin Panel</title>
    <link rel="stylesheet" href="css/admin.css">
</head>

<body>
    <!-- Login Form -->
    <div id="loginContainer" class="login-container">
        <form class="login-form" id="loginForm">
            <h1>–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å —à–∫–æ–ª—å–Ω–æ–≥–æ –±–æ—Ç–∞</h1>
            <div id="loginError" class="error"></div>

            <div class="form-group">
                <label for="login">–õ–æ–≥–∏–Ω</label>
                <input type="text" id="login" name="login" required placeholder="admin">
            </div>

            <div class="form-group">
                <label for="password">–ü–∞—Ä–æ–ª—å</label>
                <input type="password" id="password" name="password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            </div>

            <button type="submit" class="btn">–í–æ–π—Ç–∏</button>
        </form>
    </div>

    <!-- Admin Panel -->
    <div id="adminPanel" class="admin-panel">
        <div class="container">
            <!-- Header -->
            <div class="header">
                <h1>üéì –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–∫–æ–ª—å–Ω—ã–º –±–æ—Ç–æ–º</h1>
                <div class="header-controls">
                    <div class="stats-summary" id="statsSummary">
                        <div class="stat-item">
                            <span class="stat-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:</span>
                            <span class="stat-value" id="totalUsers">-</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">–ö—É—Ä—Å–æ–≤:</span>
                            <span class="stat-value" id="totalCourses">-</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">–ê–¥–º–∏–Ω–æ–≤:</span>
                            <span class="stat-value" id="totalAdmins">-</span>
                        </div>
                    </div>
                    <button id="logoutBtn" class="btn btn-sm">–í—ã–π—Ç–∏</button>
                </div>
            </div>

            <div id="successMessage" class="success"></div>
            <div id="errorMessage" class="error"></div>

            <!-- Navigation Tabs -->
            <div class="nav-tabs">
                <div class="tab-buttons">
                    <button class="tab-btn active" data-tab="users">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
                    <button class="tab-btn" data-tab="courses">üìö –ö—É—Ä—Å—ã</button>
                    <button class="tab-btn" data-tab="lessons">üìñ –£—Ä–æ–∫–∏</button>
                    <button class="tab-btn" data-tab="tests">üìù –¢–µ—Å—Ç—ã</button>
                    <button class="tab-btn" data-tab="admins">üë®‚Äçüíº –ê–¥–º–∏–Ω—ã</button>
                    <button class="tab-btn" data-tab="notifications">üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</button>
                </div>

                <!-- Users Tab -->
                <div id="usersTab" class="tab-content active">
                    <div class="search-controls">
                        <input type="text" class="search-input" id="usersSearch"
                            placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ Telegram ID...">

                        <select id="courseProgressFilter" class="filter-select">
                            <option value="">–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</option>
                            <option value="completed">–ó–∞–≤–µ—Ä—à–∏–ª–∏ –∫—É—Ä—Å</option>
                            <option value="in_progress">–í –ø—Ä–æ—Ü–µ—Å—Å–µ</option>
                            <option value="not_started">–ù–µ –Ω–∞—á–∏–Ω–∞–ª–∏</option>
                        </select>

                        <button class="btn btn-sm btn-secondary" id="clearUserFilters">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
                        <button class="btn btn-sm" id="refreshUsers">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                    </div>

                    <div id="usersFiltersInfo" class="filters-info"></div>

                    <div class="table-container">
                        <div id="usersLoading" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                        <table id="usersTable" style="display: none;">
                            <thead>
                                <tr>
                                    <th>Telegram ID</th>
                                    <th>–ò–º—è</th>
                                    <th>Username</th>
                                    <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                                    <th>–ü—Ä–æ–≥—Ä–µ—Å—Å</th>
                                    <th>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</th>
                                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                        <div class="pagination" id="usersPagination"></div>
                    </div>
                </div>

                <!-- Courses Tab -->
                <div id="coursesTab" class="tab-content">
                    <div class="search-controls">
                        <input type="text" class="search-input" id="coursesSearch"
                            placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∫—É—Ä—Å–∞...">
                        <button class="btn btn-sm" id="addCourseBtn">+ –î–æ–±–∞–≤–∏—Ç—å –∫—É—Ä—Å</button>
                        <button class="btn btn-sm" id="refreshCourses">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                    </div>
                    <div class="table-container">
                        <div id="coursesLoading" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                        <table id="coursesTable" style="display: none;">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                    <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                                    <th>–ê–∫—Ç–∏–≤–µ–Ω</th>
                                    <th>–ü–æ—Ä—è–¥–æ–∫</th>
                                    <th>–£—Ä–æ–∫–æ–≤</th>
                                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                        <div class="pagination" id="coursesPagination"></div>
                    </div>
                </div>

                <!-- Lessons Tab -->
                <div id="lessonsTab" class="tab-content">
                    <div class="search-controls">
                        <input type="text" class="search-input" id="lessonsSearch"
                            placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —É—Ä–æ–∫–∞...">

                        <select id="courseFilter" class="filter-select">
                            <option value="">–í—Å–µ –∫—É—Ä—Å—ã</option>
                        </select>

                        <select id="mediaTypeFilter" class="filter-select">
                            <option value="">–í—Å–µ —Ç–∏–ø—ã –º–µ–¥–∏–∞</option>
                            <option value="PHOTO">–§–æ—Ç–æ</option>
                            <option value="VIDEO">–í–∏–¥–µ–æ</option>
                        </select>

                        <button class="btn btn-sm btn-secondary" id="clearLessonFilters">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
                        <button class="btn btn-sm" id="addLessonBtn">+ –î–æ–±–∞–≤–∏—Ç—å —É—Ä–æ–∫</button>
                        <button class="btn btn-sm" id="refreshLessons">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                    </div>

                    <div id="lessonsFiltersInfo" class="filters-info"></div>

                    <div class="table-container">
                        <div id="lessonsLoading" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                        <table id="lessonsTable" style="display: none;">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>–ö—É—Ä—Å</th>
                                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                    <th>–¢–∏–ø –º–µ–¥–∏–∞</th>
                                    <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                                    <th>–ö–Ω–æ–ø–∫–∞</th>
                                    <th>–ï—Å—Ç—å —Ç–µ—Å—Ç</th>
                                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                        <div class="pagination" id="lessonsPagination"></div>
                    </div>
                </div>

                <!-- Tests Tab -->
                <div id="testsTab" class="tab-content">
                    <div class="search-controls">
                        <input type="text" class="search-input" id="testsSearch"
                            placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Ç–µ—Å—Ç–∞...">
                        <button class="btn btn-sm" id="refreshTests">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                    </div>
                    <div class="table-container">
                        <div id="testsLoading" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                        <table id="testsTable" style="display: none;">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>–£—Ä–æ–∫</th>
                                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞</th>
                                    <th>–í–æ–ø—Ä–æ—Å–æ–≤</th>
                                    <th>–†–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</th>
                                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                        <div class="pagination" id="testsPagination"></div>
                    </div>
                </div>

                <!-- Admins Tab -->
                <div id="adminsTab" class="tab-content">
                    <div class="search-controls">
                        <input type="text" class="search-input" id="adminsSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ Telegram ID...">
                        <button class="btn btn-sm" id="addAdminBtn">+ –î–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–∞</button>
                        <button class="btn btn-sm" id="refreshAdmins">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                    </div>
                    <div class="table-container">
                        <div id="adminsLoading" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                        <table id="adminsTable" style="display: none;">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Telegram ID</th>
                                    <th>–î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è</th>
                                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                        <div class="pagination" id="adminsPagination"></div>
                    </div>
                </div>

                <!-- Notifications Tab -->
                <div id="notificationsTab" class="tab-content">
                    <div class="search-controls">
                        <button class="btn btn-sm" id="addNotificationBtn">+ –î–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</button>
                        <button class="btn btn-sm" id="refreshNotifications">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                    </div>
                    <div class="table-container">
                        <div id="notificationsLoading" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                        <table id="notificationsTable" style="display: none;">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>–ö—É—Ä—Å</th>
                                    <th>–°–æ—Å—Ç–æ—è–Ω–∏–µ</th>
                                    <th>–¢–∏–ø –º–µ–¥–∏–∞</th>
                                    <th>–ó–∞–¥–µ—Ä–∂–∫–∞ (–º–∏–Ω)</th>
                                    <th>–ê–∫—Ç–∏–≤–Ω–æ</th>
                                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                        <div class="pagination" id="notificationsPagination"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Course Modal -->
    <div id="courseModal" class="modal">
        <div class="modal-content">
            <button class="close-modal">&times;</button>
            <h2 id="courseModalTitle">–î–æ–±–∞–≤–∏—Ç—å –∫—É—Ä—Å</h2>
            <form id="courseForm">
                <div class="form-group">
                    <label for="courseTitle">–ù–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞</label>
                    <input type="text" id="courseTitle" name="title" required>
                </div>
                <div class="form-group">
                    <label for="courseDescription">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="courseDescription" name="description" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="courseOrderIndex">–ü–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</label>
                    <input type="number" id="courseOrderIndex" name="orderIndex" min="0" value="0">
                </div>
                <div class="form-group checkbox-group">
                    <label for="courseIsActive">
                        <input type="checkbox" id="courseIsActive" name="isActive" checked>
                        –ê–∫—Ç–∏–≤–µ–Ω
                    </label>
                </div>
                <button type="submit" class="btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button type="button" class="btn btn-secondary" onclick="closeModal('courseModal')">–û—Ç–º–µ–Ω–∞</button>
            </form>
        </div>
    </div>

    <!-- Lesson Modal -->
    <div id="lessonModal" class="modal">
        <div class="modal-content">
            <button class="close-modal">&times;</button>
            <h2 id="lessonModalTitle">–î–æ–±–∞–≤–∏—Ç—å —É—Ä–æ–∫</h2>
            <form id="lessonForm">
                <div class="form-group">
                    <label for="lessonCourseId">–ö—É—Ä—Å</label>
                    <select id="lessonCourseId" name="courseId" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫—É—Ä—Å</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="lessonTitle">–ù–∞–∑–≤–∞–Ω–∏–µ —É—Ä–æ–∫–∞</label>
                    <input type="text" id="lessonTitle" name="title" required>
                </div>
                <div class="form-group">
                    <label for="lessonMediaType">–¢–∏–ø –º–µ–¥–∏–∞</label>
                    <select id="lessonMediaType" name="mediaType" required>
                        <option value="PHOTO">–§–æ—Ç–æ</option>
                        <option value="VIDEO">–í–∏–¥–µ–æ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="lessonMediaUrl">URL –º–µ–¥–∏–∞</label>
                    <input type="url" id="lessonMediaUrl" name="mediaUrl" required>
                </div>
                <div class="form-group">
                    <label for="lessonCaption">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="lessonCaption" name="caption" rows="4"></textarea>
                </div>
                <div class="form-group">
                    <label for="lessonButtonText">–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <input type="text" id="lessonButtonText" name="buttonText">
                </div>
                <div class="form-group">
                    <label for="lessonButtonUrl">URL –∫–Ω–æ–ø–∫–∏ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <input type="url" id="lessonButtonUrl" name="buttonUrl">
                </div>
                <div class="form-group">
                    <label for="lessonOrderIndex">–ü–æ—Ä—è–¥–æ–∫ –≤ –∫—É—Ä—Å–µ</label>
                    <input type="number" id="lessonOrderIndex" name="orderIndex" min="0" value="0">
                </div>
                <button type="submit" class="btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button type="button" class="btn btn-secondary" onclick="closeModal('lessonModal')">–û—Ç–º–µ–Ω–∞</button>
            </form>
        </div>
    </div>

    <!-- Admin Modal -->
    <div id="adminModal" class="modal">
        <div class="modal-content">
            <button class="close-modal">&times;</button>
            <h2 id="adminModalTitle">–î–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>
            <form id="adminForm">
                <div class="form-group">
                    <label for="adminTelegramId">Telegram ID</label>
                    <input type="text" id="adminTelegramId" name="telegramId" required placeholder="123456789"
                        pattern="[0-9]+" title="–¢–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã">
                </div>
                <button type="submit" class="btn">–î–æ–±–∞–≤–∏—Ç—å</button>
                <button type="button" class="btn btn-secondary" onclick="closeModal('adminModal')">–û—Ç–º–µ–Ω–∞</button>
            </form>
        </div>
    </div>

    <!-- Notification Modal -->
    <div id="notificationModal" class="modal">
        <div class="modal-content">
            <button class="close-modal">&times;</button>
            <h2 id="notificationModalTitle">–î–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</h2>
            <form id="notificationForm">
                <div class="form-group">
                    <label for="notificationCourseId">–ö—É—Ä—Å (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <select id="notificationCourseId" name="courseId">
                        <option value="">–î–ª—è –≤—Å–µ—Ö –∫—É—Ä—Å–æ–≤</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="notificationState">–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                    <select id="notificationState" name="state">
                        <option value="WATCHING_LESSON">–ü—Ä–æ—Å–º–æ—Ç—Ä —É—Ä–æ–∫–∞</option>
                        <option value="TAKING_TEST">–ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞</option>
                        <option value="COMPLETED_COURSE">–ó–∞–≤–µ—Ä—à–∏–ª –∫—É—Ä—Å</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="notificationMediaType">–¢–∏–ø –º–µ–¥–∏–∞</label>
                    <select id="notificationMediaType" name="mediaType" required>
                        <option value="PHOTO">–§–æ—Ç–æ</option>
                        <option value="VIDEO">–í–∏–¥–µ–æ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="notificationMediaUrl">URL –º–µ–¥–∏–∞</label>
                    <input type="url" id="notificationMediaUrl" name="mediaUrl" required>
                </div>
                <div class="form-group">
                    <label for="notificationCaption">–¢–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</label>
                    <textarea id="notificationCaption" name="caption" rows="4" required></textarea>
                </div>
                <div class="form-group">
                    <label for="notificationButtonText">–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <input type="text" id="notificationButtonText" name="buttonText">
                </div>
                <div class="form-group">
                    <label for="notificationButtonUrl">URL –∫–Ω–æ–ø–∫–∏ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <input type="url" id="notificationButtonUrl" name="buttonUrl">
                </div>
                <div class="form-group">
                    <label for="notificationDelayMinutes">–ó–∞–¥–µ—Ä–∂–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ (–º–∏–Ω—É—Ç—ã)</label>
                    <input type="number" id="notificationDelayMinutes" name="delayMinutes" min="1" value="30">
                </div>
                <div class="form-group checkbox-group">
                    <label for="notificationIsActive">
                        <input type="checkbox" id="notificationIsActive" name="isActive" checked>
                        –ê–∫—Ç–∏–≤–Ω–æ
                    </label>
                </div>
                <button type="submit" class="btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button type="button" class="btn btn-secondary"
                    onclick="closeModal('notificationModal')">–û—Ç–º–µ–Ω–∞</button>
            </form>
        </div>
    </div>

    <script type="module" src="js/bot-admin.js"></script>
</body>

</html>